<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map-canvas { height: 100% }
    </style>
    <script type="text/javascript"
      src="http://maps.googleapis.com/maps/api/js?sensor=false">
    </script>
    <script type="text/javascript">
      var asal = null;
      var tujuan = null;

      PilihAsalTujuanControl.prototype.toggleAsal = true;
      
      function PilihAsalTujuanControl(controlDiv, map) {
        var control = this;

        // Set CSS styles for the DIV containing the control
        // Setting padding to 5 px will offset the control
        // from the edge of the map
        controlDiv.style.padding = '5px';

        // Set CSS for the control border
        var controlUI = document.createElement('div');
        controlUI.style.backgroundColor = 'white';
        controlUI.style.borderStyle = 'solid';
        controlUI.style.borderWidth = '1px';
        controlUI.style.cursor = 'pointer';
        controlUI.style.textAlign = 'center';
        controlUI.title = 'Klik untuk berubah antara memilih titik asal dan titik tujuan';
        controlDiv.appendChild(controlUI);

        // Set CSS for the control interior
        var controlText = document.createElement('div');
        controlText.style.fontFamily = 'Arial,sans-serif';
        controlText.style.fontSize = '16px';
        controlText.style.paddingLeft = '4px';
        controlText.style.paddingRight = '4px';
        controlText.innerHTML = '<b>Memilih asal</b>';
        controlUI.appendChild(controlText);

        // Setup the click event listeners: simply set the map to
        // Chicago
        google.maps.event.addDomListener(controlUI, 'click', function() {
          if (!control.toggleAsal) {
            control.toggleAsal = true;
            controlText.innerHTML = '<b>Memilih asal</b>';
          }
          else {
            control.toggleAsal = false;
            controlText.innerHTML = '<b>Memilih tujuan</b>';
          }
        });

        google.maps.event.addListener(map, 'click', function(e) {
          if (control.toggleAsal) {
            if (asal != null) {
              asal.setMap(null);
              asal = null;
            }
            asal = new google.maps.Marker({
              position: e.latLng,
              map: map,
              animation: google.maps.Animation.DROP,
            });
          } else {
            if (tujuan != null) {
              tujuan.setMap(null);
              tujuan = null;
            }
            tujuan = new google.maps.Marker({
              position: e.latLng,
              map: map,
              animation: google.maps.Animation.DROP,
            });
          }
        })
      }

      function initialize() {
        var itebe = new google.maps.LatLng(-6.892578,107.610397);
        var mapOptions = {
          center: itebe,
          zoom: 15,
          streetViewControl: false,
        };
        var map = new google.maps.Map(document.getElementById("map-canvas"),
            mapOptions);

        // Create the DIV to hold the control and
        // call the HomeControl() constructor passing
        // in this DIV.
        var pilihAsalTujuanControlDiv = document.createElement('div');
        var pilihAsalTujuanControl = new PilihAsalTujuanControl(pilihAsalTujuanControlDiv, map);
        pilihAsalTujuanControlDiv.index = 1;
        map.controls[google.maps.ControlPosition.RIGHT_TOP].push(pilihAsalTujuanControlDiv);
      }

      google.maps.event.addDomListener(window, 'load', initialize);
    </script>
  </head>
  <body>
    <div id="map-canvas" />
  </body>
</html>